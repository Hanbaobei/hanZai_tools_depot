import{b as q,d as b,_ as V,a as B,u as I,c as F,e as C,o as v,f as _,n as g,g as t,r as R,h as M,w as ae,i as Fe,j as ye,k as Re,l as ge,m as he,p as be,q as ne,s as E,t as W,v as j,x as $,y as De,E as x,z as oe,A as ke,B as we,N as D,C as ee,D as z,F as Ue,G as Oe,H as $e,I as G,J as w,K as Be,L as Ne,M as je,T as Me,O as xe,P as te,Q as re,R as Ae,S as le,U as ze,V as Ie,W as qe,X as He,Y as ie,Z as ue,$ as Ke,a0 as Ge,a1 as A}from"./index-B-3mYW8V.js";import{b as Ve,u as We,a as X,i as Xe,e as Je,E as Ye,c as Qe,h as Z,d as K,f as Ze,g as et}from"./http-sQOYNUQV.js";var tt=1,st=4;function de(n){return Ve(n,tt|st)}const at=q({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:b(String),default:"solid"}}),ot=B({name:"ElDivider"}),nt=B({...ot,props:at,setup(n){const o=n,a=I("divider"),l=F(()=>a.cssVar({"border-style":o.borderStyle}));return(u,p)=>(v(),C("div",{class:g([t(a).b(),t(a).m(u.direction)]),style:M(t(l)),role:"separator"},[u.$slots.default&&u.direction!=="vertical"?(v(),C("div",{key:0,class:g([t(a).e("text"),t(a).is(u.contentPosition)])},[R(u.$slots,"default")],2)):_("v-if",!0)],6))}});var rt=V(nt,[["__file","divider.vue"]]);const lt=ae(rt),it=q({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:b(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:b([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:b(Function),default:n=>`${n}%`}}),ut=B({name:"ElProgress"}),dt=B({...ut,props:it,setup(n){const o=n,a={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},l=I("progress"),u=F(()=>{const r={width:`${o.percentage}%`,animationDuration:`${o.duration}s`},k=T(o.percentage);return k.includes("gradient")?r.background=k:r.backgroundColor=k,r}),p=F(()=>(o.strokeWidth/o.width*100).toFixed(1)),m=F(()=>["circle","dashboard"].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(p.value)/2}`,10):0),S=F(()=>{const r=m.value,k=o.type==="dashboard";return`
          M 50 50
          m 0 ${k?"":"-"}${r}
          a ${r} ${r} 0 1 1 0 ${k?"-":""}${r*2}
          a ${r} ${r} 0 1 1 0 ${k?"":"-"}${r*2}
          `}),h=F(()=>2*Math.PI*m.value),P=F(()=>o.type==="dashboard"?.75:1),L=F(()=>`${-1*h.value*(1-P.value)/2}px`),f=F(()=>({strokeDasharray:`${h.value*P.value}px, ${h.value}px`,strokeDashoffset:L.value})),y=F(()=>({strokeDasharray:`${h.value*P.value*(o.percentage/100)}px, ${h.value}px`,strokeDashoffset:L.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),e=F(()=>{let r;return o.color?r=T(o.percentage):r=a[o.status]||a.default,r}),d=F(()=>o.status==="warning"?Fe:o.type==="line"?o.status==="success"?ye:Re:o.status==="success"?ge:he),s=F(()=>o.type==="line"?12+o.strokeWidth*.4:o.width*.111111+2),c=F(()=>o.format(o.percentage));function i(r){const k=100/r.length;return r.map((U,O)=>ne(U)?{color:U,percentage:(O+1)*k}:U).sort((U,O)=>U.percentage-O.percentage)}const T=r=>{var k;const{color:N}=o;if(be(N))return N(r);if(ne(N))return N;{const U=i(N);for(const O of U)if(O.percentage>r)return O.color;return(k=U[U.length-1])==null?void 0:k.color}};return(r,k)=>(v(),C("div",{class:g([t(l).b(),t(l).m(r.type),t(l).is(r.status),{[t(l).m("without-text")]:!r.showText,[t(l).m("text-inside")]:r.textInside}]),role:"progressbar","aria-valuenow":r.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[r.type==="line"?(v(),C("div",{key:0,class:g(t(l).b("bar"))},[E("div",{class:g(t(l).be("bar","outer")),style:M({height:`${r.strokeWidth}px`})},[E("div",{class:g([t(l).be("bar","inner"),{[t(l).bem("bar","inner","indeterminate")]:r.indeterminate},{[t(l).bem("bar","inner","striped")]:r.striped},{[t(l).bem("bar","inner","striped-flow")]:r.stripedFlow}]),style:M(t(u))},[(r.showText||r.$slots.default)&&r.textInside?(v(),C("div",{key:0,class:g(t(l).be("bar","innerText"))},[R(r.$slots,"default",{percentage:r.percentage},()=>[E("span",null,W(t(c)),1)])],2)):_("v-if",!0)],6)],6)],2)):(v(),C("div",{key:1,class:g(t(l).b("circle")),style:M({height:`${r.width}px`,width:`${r.width}px`})},[(v(),C("svg",{viewBox:"0 0 100 100"},[E("path",{class:g(t(l).be("circle","track")),d:t(S),stroke:`var(${t(l).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":r.strokeLinecap,"stroke-width":t(p),fill:"none",style:M(t(f))},null,14,["d","stroke","stroke-linecap","stroke-width"]),E("path",{class:g(t(l).be("circle","path")),d:t(S),stroke:t(e),fill:"none",opacity:r.percentage?1:0,"stroke-linecap":r.strokeLinecap,"stroke-width":t(p),style:M(t(y))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(r.showText||r.$slots.default)&&!r.textInside?(v(),C("div",{key:2,class:g(t(l).e("text")),style:M({fontSize:`${t(s)}px`})},[R(r.$slots,"default",{percentage:r.percentage},()=>[r.status?(v(),j(t(x),{key:1},{default:$(()=>[(v(),j(De(t(d))))]),_:1})):(v(),C("span",{key:0},W(t(c)),1))])],6)):_("v-if",!0)],10,["aria-valuenow"]))}});var ct=V(dt,[["__file","progress.vue"]]);const pt=ae(ct),_e=Symbol("uploadContextKey"),ft="ElUpload";class vt extends Error{constructor(o,a,l,u){super(o),this.name="UploadAjaxError",this.status=a,this.method=l,this.url=u}}function ce(n,o,a){let l;return a.response?l=`${a.response.error||a.response}`:a.responseText?l=`${a.responseText}`:l=`fail to ${o.method} ${n} ${a.status}`,new vt(l,a.status,o.method,n)}function mt(n){const o=n.responseText||n.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}const yt=n=>{typeof XMLHttpRequest>"u"&&oe(ft,"XMLHttpRequest is undefined");const o=new XMLHttpRequest,a=n.action;o.upload&&o.upload.addEventListener("progress",p=>{const m=p;m.percent=p.total>0?p.loaded/p.total*100:0,n.onProgress(m)});const l=new FormData;if(n.data)for(const[p,m]of Object.entries(n.data))ke(m)&&m.length?l.append(p,...m):l.append(p,m);l.append(n.filename,n.file,n.file.name),o.addEventListener("error",()=>{n.onError(ce(a,n,o))}),o.addEventListener("load",()=>{if(o.status<200||o.status>=300)return n.onError(ce(a,n,o));n.onSuccess(mt(o))}),o.open(n.method,a,!0),n.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const u=n.headers||{};if(u instanceof Headers)u.forEach((p,m)=>o.setRequestHeader(m,p));else for(const[p,m]of Object.entries(u))we(m)||o.setRequestHeader(p,String(m));return o.send(l),o},Ee=["text","picture","picture-card"];let gt=1;const se=()=>Date.now()+gt++,Ce=q({action:{type:String,default:"#"},headers:{type:b(Object)},method:{type:String,default:"post"},data:{type:b([Object,Function,Promise]),default:()=>ee({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:b(Array),default:()=>ee([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ee,default:"text"},httpRequest:{type:b(Function),default:yt},disabled:Boolean,limit:Number}),ht=q({...Ce,beforeUpload:{type:b(Function),default:D},beforeRemove:{type:b(Function)},onRemove:{type:b(Function),default:D},onChange:{type:b(Function),default:D},onPreview:{type:b(Function),default:D},onSuccess:{type:b(Function),default:D},onProgress:{type:b(Function),default:D},onError:{type:b(Function),default:D},onExceed:{type:b(Function),default:D},crossorigin:{type:b(String)}}),bt=q({files:{type:b(Array),default:()=>ee([])},disabled:{type:Boolean,default:!1},handlePreview:{type:b(Function),default:D},listType:{type:String,values:Ee,default:"text"},crossorigin:{type:b(String)}}),kt={remove:n=>!!n},wt=B({name:"ElUploadList"}),$t=B({...wt,props:bt,emits:kt,setup(n,{emit:o}){const a=n,{t:l}=We(),u=I("upload"),p=I("icon"),m=I("list"),S=X(),h=z(!1),P=F(()=>[u.b("list"),u.bm("list",a.listType),u.is("disabled",a.disabled)]),L=f=>{o("remove",f)};return(f,y)=>(v(),j(Me,{tag:"ul",class:g(t(P)),name:t(m).b()},{default:$(()=>[(v(!0),C(Ue,null,Oe(f.files,(e,d)=>(v(),C("li",{key:e.uid||e.name,class:g([t(u).be("list","item"),t(u).is(e.status),{focusing:h.value}]),tabindex:"0",onKeydown:$e(s=>!t(S)&&L(e),["delete"]),onFocus:s=>h.value=!0,onBlur:s=>h.value=!1,onClick:s=>h.value=!1},[R(f.$slots,"default",{file:e,index:d},()=>[f.listType==="picture"||e.status!=="uploading"&&f.listType==="picture-card"?(v(),C("img",{key:0,class:g(t(u).be("list","item-thumbnail")),src:e.url,crossorigin:f.crossorigin,alt:""},null,10,["src","crossorigin"])):_("v-if",!0),e.status==="uploading"||f.listType!=="picture-card"?(v(),C("div",{key:1,class:g(t(u).be("list","item-info"))},[E("a",{class:g(t(u).be("list","item-name")),onClick:G(s=>f.handlePreview(e),["prevent"])},[w(t(x),{class:g(t(p).m("document"))},{default:$(()=>[w(t(Be))]),_:1},8,["class"]),E("span",{class:g(t(u).be("list","item-file-name")),title:e.name},W(e.name),11,["title"])],10,["onClick"]),e.status==="uploading"?(v(),j(t(pt),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(e.percentage),style:M(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):_("v-if",!0)],2)):_("v-if",!0),E("label",{class:g(t(u).be("list","item-status-label"))},[f.listType==="text"?(v(),j(t(x),{key:0,class:g([t(p).m("upload-success"),t(p).m("circle-check")])},{default:$(()=>[w(t(ye))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(v(),j(t(x),{key:1,class:g([t(p).m("upload-success"),t(p).m("check")])},{default:$(()=>[w(t(ge))]),_:1},8,["class"])):_("v-if",!0)],2),t(S)?_("v-if",!0):(v(),j(t(x),{key:2,class:g(t(p).m("close")),onClick:s=>L(e)},{default:$(()=>[w(t(he))]),_:2},1032,["class","onClick"])),_(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),_(" This is a bug which needs to be fixed "),_(" TODO: Fix the incorrect navigation interaction "),t(S)?_("v-if",!0):(v(),C("i",{key:3,class:g(t(p).m("close-tip"))},W(t(l)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(v(),C("span",{key:4,class:g(t(u).be("list","item-actions"))},[E("span",{class:g(t(u).be("list","item-preview")),onClick:s=>f.handlePreview(e)},[w(t(x),{class:g(t(p).m("zoom-in"))},{default:$(()=>[w(t(Ne))]),_:1},8,["class"])],10,["onClick"]),t(S)?_("v-if",!0):(v(),C("span",{key:0,class:g(t(u).be("list","item-delete")),onClick:s=>L(e)},[w(t(x),{class:g(t(p).m("delete"))},{default:$(()=>[w(t(je))]),_:1},8,["class"])],10,["onClick"]))],2)):_("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),R(f.$slots,"append")]),_:3},8,["class","name"]))}});var pe=V($t,[["__file","upload-list.vue"]]);const _t=q({disabled:{type:Boolean,default:!1}}),Et={file:n=>ke(n)},Se="ElUploadDrag",Ct=B({name:Se}),St=B({...Ct,props:_t,emits:Et,setup(n,{emit:o}){xe(_e)||oe(Se,"usage: <el-upload><el-upload-dragger /></el-upload>");const l=I("upload"),u=z(!1),p=X(),m=h=>{if(p.value)return;u.value=!1,h.stopPropagation();const P=Array.from(h.dataTransfer.files),L=h.dataTransfer.items||[];P.forEach((f,y)=>{var e;const d=L[y],s=(e=d==null?void 0:d.webkitGetAsEntry)==null?void 0:e.call(d);s&&(f.isDirectory=s.isDirectory)}),o("file",P)},S=()=>{p.value||(u.value=!0)};return(h,P)=>(v(),C("div",{class:g([t(l).b("dragger"),t(l).is("dragover",u.value)]),onDrop:G(m,["prevent"]),onDragover:G(S,["prevent"]),onDragleave:G(L=>u.value=!1,["prevent"])},[R(h.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Pt=V(St,[["__file","upload-dragger.vue"]]);const Lt=q({...Ce,beforeUpload:{type:b(Function),default:D},onRemove:{type:b(Function),default:D},onStart:{type:b(Function),default:D},onSuccess:{type:b(Function),default:D},onProgress:{type:b(Function),default:D},onError:{type:b(Function),default:D},onExceed:{type:b(Function),default:D}}),Tt=B({name:"ElUploadContent",inheritAttrs:!1}),Ft=B({...Tt,props:Lt,setup(n,{expose:o}){const a=n,l=I("upload"),u=X(),p=te({}),m=te(),S=s=>{if(s.length===0)return;const{autoUpload:c,limit:i,fileList:T,multiple:r,onStart:k,onExceed:N}=a;if(i&&T.length+s.length>i){N(s,T);return}r||(s=s.slice(0,1));for(const U of s){const O=U;O.uid=se(),k(O),c&&h(O)}},h=async s=>{if(m.value.value="",!a.beforeUpload)return L(s);let c,i={};try{const r=a.data,k=a.beforeUpload(s);i=re(a.data)?de(a.data):a.data,c=await k,re(a.data)&&Xe(r,i)&&(i=de(a.data))}catch{c=!1}if(c===!1){a.onRemove(s);return}let T=s;c instanceof Blob&&(c instanceof File?T=c:T=new File([c],s.name,{type:s.type})),L(Object.assign(T,{uid:s.uid}),i)},P=async(s,c)=>be(s)?s(c):s,L=async(s,c)=>{const{headers:i,data:T,method:r,withCredentials:k,name:N,action:U,onProgress:O,onSuccess:Pe,onError:Le,httpRequest:Te}=a;try{c=await P(c??T,s)}catch{a.onRemove(s);return}const{uid:J}=s,Y={headers:i||{},withCredentials:k,file:s,data:c,method:r,filename:N,action:U,onProgress:H=>{O(H,s)},onSuccess:H=>{Pe(H,s),delete p.value[J]},onError:H=>{Le(H,s),delete p.value[J]}},Q=Te(Y);p.value[J]=Q,Q instanceof Promise&&Q.then(Y.onSuccess,Y.onError)},f=s=>{const c=s.target.files;c&&S(Array.from(c))},y=()=>{u.value||(m.value.value="",m.value.click())},e=()=>{y()};return o({abort:s=>{Je(p.value).filter(s?([i])=>String(s.uid)===i:()=>!0).forEach(([i,T])=>{T instanceof XMLHttpRequest&&T.abort(),delete p.value[i]})},upload:h}),(s,c)=>(v(),C("div",{class:g([t(l).b(),t(l).m(s.listType),t(l).is("drag",s.drag),t(l).is("disabled",t(u))]),tabindex:t(u)?"-1":"0",onClick:y,onKeydown:$e(G(e,["self"]),["enter","space"])},[s.drag?(v(),j(Pt,{key:0,disabled:t(u),onFile:S},{default:$(()=>[R(s.$slots,"default")]),_:3},8,["disabled"])):R(s.$slots,"default",{key:1}),E("input",{ref_key:"inputRef",ref:m,class:g(t(l).e("input")),name:s.name,disabled:t(u),multiple:s.multiple,accept:s.accept,type:"file",onChange:f,onClick:G(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var fe=V(Ft,[["__file","upload-content.vue"]]);const ve="ElUpload",me=n=>{var o;(o=n.url)!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(n.url)},Rt=(n,o)=>{const a=Ae(n,"fileList",void 0,{passive:!0}),l=e=>a.value.find(d=>d.uid===e.uid);function u(e){var d;(d=o.value)==null||d.abort(e)}function p(e=["ready","uploading","success","fail"]){a.value=a.value.filter(d=>!e.includes(d.status))}function m(e){a.value=a.value.filter(d=>d.uid!==e.uid)}const S=(e,d)=>{const s=l(d);s&&(console.error(e),s.status="fail",m(s),n.onError(e,s,a.value),n.onChange(s,a.value))},h=(e,d)=>{const s=l(d);s&&(n.onProgress(e,s,a.value),s.status="uploading",s.percentage=Math.round(e.percent))},P=(e,d)=>{const s=l(d);s&&(s.status="success",s.response=e,n.onSuccess(e,s,a.value),n.onChange(s,a.value))},L=e=>{we(e.uid)&&(e.uid=se());const d={name:e.name,percentage:0,status:"ready",size:e.size,raw:e,uid:e.uid};if(n.listType==="picture-card"||n.listType==="picture")try{d.url=URL.createObjectURL(e)}catch(s){ze(ve,s.message),n.onError(s,d,a.value)}a.value=[...a.value,d],n.onChange(d,a.value)},f=async e=>{const d=e instanceof File?l(e):e;d||oe(ve,"file to be removed not found");const s=c=>{u(c),m(c),n.onRemove(c,a.value),me(c)};n.beforeRemove?await n.beforeRemove(d,a.value)!==!1&&s(d):s(d)};function y(){a.value.filter(({status:e})=>e==="ready").forEach(({raw:e})=>{var d;return e&&((d=o.value)==null?void 0:d.upload(e))})}return le(()=>n.listType,e=>{e!=="picture-card"&&e!=="picture"||(a.value=a.value.map(d=>{const{raw:s,url:c}=d;if(!c&&s)try{d.url=URL.createObjectURL(s)}catch(i){n.onError(i,d,a.value)}return d}))}),le(a,e=>{for(const d of e)d.uid||(d.uid=se()),d.status||(d.status="success")},{immediate:!0,deep:!0}),{uploadFiles:a,abort:u,clearFiles:p,handleError:S,handleProgress:h,handleStart:L,handleSuccess:P,handleRemove:f,submit:y,revokeFileObjectURL:me}},Dt=B({name:"ElUpload"}),Ut=B({...Dt,props:ht,setup(n,{expose:o}){const a=n,l=X(),u=te(),{abort:p,submit:m,clearFiles:S,uploadFiles:h,handleStart:P,handleError:L,handleRemove:f,handleSuccess:y,handleProgress:e,revokeFileObjectURL:d}=Rt(a,u),s=F(()=>a.listType==="picture-card"),c=F(()=>({...a,fileList:h.value,onStart:P,onProgress:e,onSuccess:y,onError:L,onRemove:f}));return Ie(()=>{h.value.forEach(d)}),qe(_e,{accept:He(a,"accept")}),o({abort:p,submit:m,clearFiles:S,handleStart:P,handleRemove:f}),(i,T)=>(v(),C("div",null,[t(s)&&i.showFileList?(v(),j(pe,{key:0,disabled:t(l),"list-type":i.listType,files:t(h),crossorigin:i.crossorigin,"handle-preview":i.onPreview,onRemove:t(f)},ie({append:$(()=>[w(fe,ue({ref_key:"uploadRef",ref:u},t(c)),{default:$(()=>[i.$slots.trigger?R(i.$slots,"trigger",{key:0}):_("v-if",!0),!i.$slots.trigger&&i.$slots.default?R(i.$slots,"default",{key:1}):_("v-if",!0)]),_:3},16)]),_:2},[i.$slots.file?{name:"default",fn:$(({file:r,index:k})=>[R(i.$slots,"file",{file:r,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):_("v-if",!0),!t(s)||t(s)&&!i.showFileList?(v(),j(fe,ue({key:1,ref_key:"uploadRef",ref:u},t(c)),{default:$(()=>[i.$slots.trigger?R(i.$slots,"trigger",{key:0}):_("v-if",!0),!i.$slots.trigger&&i.$slots.default?R(i.$slots,"default",{key:1}):_("v-if",!0)]),_:3},16)):_("v-if",!0),i.$slots.trigger?R(i.$slots,"default",{key:2}):_("v-if",!0),R(i.$slots,"tip"),!t(s)&&i.showFileList?(v(),j(pe,{key:3,disabled:t(l),"list-type":i.listType,files:t(h),crossorigin:i.crossorigin,"handle-preview":i.onPreview,onRemove:t(f)},ie({_:2},[i.$slots.file?{name:"default",fn:$(({file:r,index:k})=>[R(i.$slots,"file",{file:r,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):_("v-if",!0)]))}});var Ot=V(Ut,[["__file","upload.vue"]]);const Bt=ae(Ot),Nt=(n,o)=>{const a=n.__vccOpts||n;for(const[l,u]of o)a[l]=u;return a},jt={class:"flex flex-col gap-10px p-20px h-full"},Mt={class:"flex flex-row gap-xl h-400px w-full"},xt={class:"bg-[#ffffff] p-20px rounded-xl h-full w-500px justify-between flex flex-col"},At={class:"flex flex-row justify-end"},zt={class:"bg-[#ffffff] flex-1 flex flex-col p-20px rounded-xl overflow-x-auto h-full"},It={key:0,class:"bg-[#ffffff] flex-1 p-20px rounded-xl overflow-x-auto"},qt={class:"flex flex-row justify-between"},Ht=["innerHTML"],Kt={__name:"index",setup(n){const o=z(),a=z(""),l=z(),u=z(),p=z(),m=async()=>{try{const y=new FormData;y.append("file",a.value);const{data:e}=await Z.Post("/task/upload",y);u.value=e.content,l.value=e.id,K.success({message:"上传成功",type:"success"})}catch(y){K.error({message:"上传失败,error:"+y,type:"error"})}},S=y=>{const{raw:e}=y;return e.type!=="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?(K.error("只可以上传docx格式食谱文件"),!1):(a.value=y.raw,!0)},h=()=>{et.Get(`/task/download/${l.value}`,{responseType:"blob"}).then(y=>{const e=y.headers["content-disposition"];let d="幼儿食谱.docx";e&&e.includes("filename=")&&(d=e.split("filename=")[1].replace(/['"]/g,""));const s=new Blob([y.blob()],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),c=window.URL.createObjectURL(s),i=document.createElement("a");i.href=c,i.download=d,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(c)}).catch(y=>{K.error({message:"下载,error:"+y,type:"error"})})},P=()=>{a.value="",u.value="",l.value=""},L=()=>{Z.Get("/task/list").then(y=>{p.value=y.data}).catch(y=>{K.error({message:"获取解析列表,error:"+y,type:"error"})})},f=async y=>{try{const{data:e}=await Z.Get("/task/get/"+y.id);u.value=e.content,l.value=e.id}catch(e){K.error({message:"查看解析列表,error:"+e,type:"error"})}};return Ke(()=>{L()}),(y,e)=>{const d=x,s=Bt,c=Ye,i=Ze,T=Qe,r=lt;return v(),C("div",jt,[E("div",Mt,[E("div",xt,[e[4]||(e[4]=E("p",null,"请选择需要解析的食谱文件:",-1)),w(s,{ref_key:"upload",ref:o,action:"","show-file-list":"","on-change":S,drag:"","auto-upload":!1,limit:1,accept:".docx"},{tip:$(()=>e[0]||(e[0]=[E("div",{class:"el-upload__tip"}," 只可以上传docx格式的文件 ",-1)])),default:$(()=>[w(d,{class:"uploader-icon"},{default:$(()=>[w(t(Ge))]),_:1}),e[1]||(e[1]=E("div",{class:"el-upload__text"},[A(" 请选择"),E("em",null,"需要解析的食谱文件"),A(": ")],-1))]),_:1},512),E("div",At,[w(c,{type:"primary",onClick:m},{default:$(()=>e[2]||(e[2]=[A("上传并解析")])),_:1}),w(c,{type:"danger",onClick:P},{default:$(()=>e[3]||(e[3]=[A("清空文件")])),_:1})])]),E("div",zt,[e[7]||(e[7]=E("p",null,"食谱解析列表:",-1)),w(T,{data:p.value,height:"350",stripe:""},{default:$(()=>[w(i,{prop:"id",label:"id"}),w(i,{prop:"name",label:"文件名"}),w(i,{prop:"status",label:"状态",width:"100"}),w(i,{prop:"create_time",label:"上传时间",width:"300"}),w(i,{fixed:"right",label:"操作",width:"150"},{default:$(({row:k})=>[w(c,{type:"primary",size:"small",onClick:N=>f(k)},{default:$(()=>e[5]||(e[5]=[A("查看")])),_:2},1032,["onClick"]),w(c,{type:"danger",size:"small"},{default:$(()=>e[6]||(e[6]=[A("删除")])),_:1})]),_:1})]),_:1},8,["data"])])]),u.value?(v(),C("div",It,[E("div",qt,[e[9]||(e[9]=E("p",{class:"font-size-20px"},"解析结果",-1)),w(c,{type:"success",onClick:h},{default:$(()=>e[8]||(e[8]=[A("下载解析结果")])),_:1})]),w(r),E("div",{innerHTML:u.value},null,8,Ht)])):_("",!0)])}}},Wt=Nt(Kt,[["__scopeId","data-v-e3fcf015"]]);export{Wt as default};
